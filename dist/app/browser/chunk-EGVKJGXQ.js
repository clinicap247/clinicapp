import{a as I,b as O,c as j,d as G,e as w,f as H,g as R,h as pe}from"./chunk-CZGE6GD2.js";import{a as T}from"./chunk-FTC6WKIC.js";import{a as $,b as L,c as B}from"./chunk-GBAG5VX4.js";import"./chunk-XAZLOLJU.js";import{b as ae,d as se,g as b,i as le,n as de}from"./chunk-KRGPEBT2.js";import{$ as _,Ca as W,Da as y,Ea as D,Fa as X,Ga as Y,H as V,I as N,Ia as Z,Ja as J,Ka as ee,L as C,Ma as a,Na as h,O as p,P as q,Qa as c,Sa as te,V as Q,W as z,Xa as P,cb as A,d as x,db as ne,fb as m,ga as l,h as M,pa as S,qa as u,rb as ie,sb as oe,ub as re,wa as r,wb as k,xa as o,ya as d}from"./chunk-O4DO2U6N.js";var ce=(()=>{class t{constructor(){this.onAddEvent=new _}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-patient-list-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[c],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Pacientes - Listado"),o(),r(4,"div",3)(5,"a",4),a(6,"Lista"),o(),r(7,"span"),a(8," - Pacientes"),o()()(),r(9,"div",5)(10,"button",6),y("click",function(){return i.onAddToggle()}),a(11," Agregar Paciente "),o()()())},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var Re=["patient-item",""],me=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["","patient-item",""]],inputs:{patient:"patient"},standalone:!0,features:[c],attrs:Re,decls:12,vars:3,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,i){e&1&&(r(0,"td",0)(1,"div",1)(2,"span",2),a(3),o()()(),r(4,"td",0)(5,"div",1)(6,"span",2),a(7),o()()(),r(8,"td",3)(9,"div",1)(10,"span",2),a(11),o()()()),e&2&&(l(3),h(i.patient.user.fullName),l(4),h(i.patient.phone),l(4),h(i.patient.address))},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var je=t=>["../detail",t];function Ve(t,F){if(t&1){let n=W();r(0,"tr",10),y("click",function(){let i=Q(n).$implicit,s=D();return z(s.onSelectTable(i))}),o()}if(t&2){let n=F.$implicit;u("routerLink",te(2,je,n.id))("patient",n)}}var ue=(()=>{class t{constructor(){this.onSelectItem=new _}onSelectTable(n){this.onSelectItem.emit(n)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-patient-list-items"]],inputs:{patients:"patients"},outputs:{onSelectItem:"onSelectItem"},standalone:!0,features:[c],decls:17,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["patient-item","","class","border-b border-dashed border-border hover:bg-card",3,"routerLink","patient","click",4,"ngFor","ngForOf"],["patient-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","routerLink","patient"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Almacenes"),o()()(),r(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Pacientes"),o(),r(11,"th",7),a(12,"Telefono"),o(),r(13,"th",8),a(14,"Direccion"),o()()(),r(15,"tbody"),S(16,Ve,1,4,"tr",9),o()()()()),e&2&&(l(16),u("ngForOf",i.patients))},dependencies:[m,A,me,k,re],encapsulation:2,changeDetection:0})}}return t})();var fe=(()=>{class t{constructor(){this.validators=[]}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-input-date"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[c],decls:1,vars:1,consts:[["type","date",3,"formControl"]],template:function(e,i){e&1&&d(0,"input",0),e&2&&u("formControl",i.formControl)},dependencies:[m,de,ae,se,le],encapsulation:2})}}return t})();var he=(()=>{class t{constructor(){this.graphqlEndpoint=G.api_url}getAll(){return x(this,arguments,function*(n={}){try{let i=new w().setRootType("query").openBlock("patients").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().close().build(),{patients:s,errors:f}=yield w.fetchQuery(i,this.graphqlEndpoint);return f?{isSuccess:!1,error:f[0].message}:{isSuccess:!0,value:s}}catch(e){return{isSuccess:!1,error:e.message}}})}getById(n){return x(this,null,function*(){try{let i=new w().setRootType("query").addFieldWithArgs("patient",{id:n}).addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().close().build(),{patients:s,errors:f}=yield w.fetchQuery(i,this.graphqlEndpoint);return f?{isSuccess:!1,error:f[0].message}:{isSuccess:!0,value:s}}catch(e){return{isSuccess:!1,error:e.message}}})}create(n,e){return x(this,null,function*(){let i=new w;i.setRootType("mutation").addFieldWithArgs("createPatient",{input:n}).addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().closeBlock();let s=i.build();console.log("Generated Mutation:",s);try{let{createPatient:f,errors:v}=yield w.fetchQuery(s,this.graphqlEndpoint);return v?{isSuccess:!1,error:v[0].message}:{isSuccess:!0,value:f}}catch(f){return{isSuccess:!1,error:f.message}}})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ne(t,F){}var ge=(()=>{class t{constructor(){this.onShowItem=!1,this.modalService=C(B),this.dialogService=C(T),this.cdr=C(P),this.patientService=C(he),this.patients=[]}ngOnInit(){this.loadPatients()}onAddPatient(){let n={component:O,data:{title:"Usuario",description:"Especificaciones necesarias del usuario a agregar"},dynamicFields:[{component:I,data:{placeholder:"usuario@sistema.com",title:"email"},fieldFormControl:new b("")},{component:I,data:{placeholder:"password",title:"Password",id:"password"},fieldFormControl:new b("")},{component:I,data:{title:"Nombres",placeholder:"Agregar nombre",id:"fullName"},fieldFormControl:new b("")}]},e={component:O,data:{title:"Paciente",description:"Es necesario ingresar el nombre del paciente"},dynamicFields:[{component:I,data:{placeholder:"1234567",title:"Carnet de identidad",id:"ic"},fieldFormControl:new b("")},{component:I,data:{placeholder:"Av. 24 de septiembre",title:"Domicilio",id:"address"},fieldFormControl:new b("")},{component:I,data:{placeholder:"telefono del paciente",title:"Telefono",id:"phone"},fieldFormControl:new b("")},{component:fe,data:{placeholder:"Fecha de nacimiento",title:"Nacimiento",id:"birthdate"},fieldFormControl:new b("")}]};this.modalService.open(j,{title:"Agregar Paciente",size:"sm",forms:[n,e],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:L.Create,title:"Agregar"}]}).subscribe(i=>{let{ic:s,address:f,phone:v,birthdate:E,email:Pe,password:Ae,fullName:Te}=H(i),Be=new Date(E).toISOString().split("T")[0].split("-").reverse().join("-"),Oe={ic:s,address:f,phone:v,birthdate:Be,user:{email:Pe,password:Ae,fullName:Te}};this.createPatient(Oe)})}loadPatients(){return x(this,null,function*(){let n=new M;this.dialogService.showLoading({description:"Cargando",listener:n});let e=yield this.patientService.getAll();if(n.next(0),!e.isSuccess){this.dialogService.showError({description:"No se ha podido cargar los pacientes"});return}this.patients=e.value,this.cdr.detectChanges()})}createPatient(n){return x(this,null,function*(){let e=new M;this.dialogService.showLoading({description:"Cargando",listener:e});let i=yield this.patientService.create(n);if(e.next(0),!i.isSuccess){this.dialogService.showError({description:"No se ha podido crear el paciente"});return}this.patients=[...this.patients,i.value],this.dialogService.ShowSuccess({description:"Paciente creado con \xE9xito"}),this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-list"]],standalone:!0,features:[c],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"patients"],["dcWrapper",""]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",0)(2,"app-patient-list-header",1),y("onAddEvent",function(){return i.onAddPatient()}),o(),d(3,"app-patient-list-items",2),o(),S(4,Ne,0,0,"ng-template",3),o()),e&2&&(u("classList",i.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),l(),u("classList",i.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),l(2),u("patients",i.patients))},dependencies:[m,ce,ue],encapsulation:2,changeDetection:0})}}return t})();var ve=(()=>{class t{constructor(){this.onAddEvent=new _,this.generareReport=new _}onAddToggle(){this.onAddEvent.emit()}onGenerateReport(){this.generareReport.emit()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-appointment-hedaer"]],outputs:{onAddEvent:"onAddEvent",generareReport:"generareReport"},standalone:!0,features:[c],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","w-full","md:w-fit","rounded-md","bg-green-800","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Citas - Listado"),o(),r(4,"div",3)(5,"a",4),a(6,"Lista"),o(),r(7,"span"),a(8," - Citas"),o()()(),r(9,"div",5)(10,"button",6),y("click",function(){return i.onGenerateReport()}),a(11," Generar Reporte "),o()()())},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var qe=["appointment-item",""],xe=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["","appointment-item",""]],inputs:{appointment:"appointment"},standalone:!0,features:[c],attrs:qe,decls:16,vars:4,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,i){if(e&1&&(r(0,"td",0)(1,"div",1)(2,"span",2),a(3),o()()(),r(4,"td",0)(5,"div",1)(6,"span",2),a(7),o()()(),r(8,"td",0)(9,"div",1)(10,"span",2),a(11),o()()(),r(12,"td",3)(13,"div",1)(14,"span",2),a(15),o()()()),e&2){let s;l(3),h(i.appointment.appointmentDate),l(4),h((s=i.appointment.doctorShedule.start_time)!==null&&s!==void 0?s:i.appointment.doctorShedule.startTime),l(4),h(i.appointment.patient.user.fullName),l(4),h(i.appointment.status)}},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();function Qe(t,F){if(t&1){let n=W();r(0,"tr",10),y("click",function(){let i=Q(n).$implicit,s=D();return z(s.onSelectTable(i))}),o()}if(t&2){let n=F.$implicit;u("appointment",n)}}var Ce=(()=>{class t{constructor(){this.itemSelected=new _}onSelectTable(n){this.itemSelected.emit(n)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-appointment-list-items"]],inputs:{appointments:"appointments"},outputs:{itemSelected:"itemSelected"},standalone:!0,features:[c],decls:19,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["appointment-item","","class","border-b border-dashed border-border hover:bg-card",3,"appointment","click",4,"ngFor","ngForOf"],["appointment-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","appointment"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Citas"),o()()(),r(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Fecha"),o(),r(11,"th",7),a(12,"Hora"),o(),r(13,"th",7),a(14,"Paciente"),o(),r(15,"th",8),a(16,"Status"),o()()(),r(17,"tbody"),S(18,Qe,1,1,"tr",9),o()()()()),e&2&&(l(18),u("ngForOf",i.appointments))},dependencies:[m,A,xe],encapsulation:2,changeDetection:0})}}return t})();var ye=(()=>{class t{close(){}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-appointment-detail"]],standalone:!0,features:[c],decls:34,vars:1,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],[1,"flex","py-2","flex-col","gap-2"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4),o(),r(5,"button",4),y("click",function(){return i.close()}),a(6," X "),o()(),d(7,"hr",5),o(),r(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Detalles"),o()()(),d(12,"hr",5),r(13,"div",6)(14,"div",7)(15,"span",8),a(16,"Fecha"),o()()(),d(17,"hr",5),r(18,"div",6)(19,"div",7)(20,"span",8),a(21,"Producto"),o()()(),d(22,"hr",5),r(23,"div",6)(24,"div",7)(25,"span",8),a(26,"Cantidad"),o()()(),d(27,"hr",5),r(28,"div",6)(29,"div",7)(30,"span",8),a(31,"Almacen"),o()()(),d(32,"hr",5)(33,"div",9),o()),e&2&&(l(4),h("Cita Medica : "))},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var U=(()=>{class t{constructor(){this.graphqlEndpoint=G.api_url}getItems(){return x(this,null,function*(){try{let e=new w().setRootType("query").openBlock("appointments").addField("appointmentDate").addField("id").addField("slotNumber").addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().openBlock("patient").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().close().close().build(),{appointments:i,errors:s}=yield w.fetchQuery(e,this.graphqlEndpoint);return s?{isSuccess:!1,error:s[0].message}:{isSuccess:!0,value:i}}catch(n){return{isSuccess:!1,error:n.message}}})}createItem(n,e){return x(this,null,function*(){try{let s=new w().setRootType("mutation").addFieldWithArgs("createAppointment",{input:n}).addField("appointmentDate").addField("id").addField("slotNumber").addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().close().build(),{createAppointment:f,errors:v}=yield w.fetchQuery(s,this.graphqlEndpoint);return v?{isSuccess:!1,error:v[0].message}:{isSuccess:!0,value:f}}catch(i){return{isSuccess:!1,error:i.message}}})}getByParams(n){return x(this,null,function*(){try{let i=new w().setRootType("query").addFieldWithArgs("appointments",{params:n}).addField("appointmentDate").addField("id").addField("slotNumber").openBlock("patient").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().addField("status").openBlock("doctorShedule").addField("dayOfWeek").addField("endTime").openBlock("doctor").addField("code").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().addField("id").addField("slotDuration").openBlock("speciality").addField("id").addField("name").closeBlock().addField("startTime").addField("status").addField("totalSlots").closeBlock().close().close().build(),{appointments:s,errors:f}=yield w.fetchQuery(i,this.graphqlEndpoint);return f?{isSuccess:!1,error:f[0].message}:{isSuccess:!0,value:s}}catch(e){return{isSuccess:!1,error:e.message}}})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function be(t){let F=Object.keys(t[0]).join(";"),n=t.map(e=>Object.values(e).join(";")).join(`
`);return`${F}
${n}`}function we(t,F){let n=new Blob([t],{type:"text/csv"}),e=window.URL.createObjectURL(n),i=document.createElement("a");i.href=e,i.download=F,i.click(),window.URL.revokeObjectURL(e)}function ze(t,F){}var Fe=(()=>{class t{constructor(){this.onShowItem=!1,this.modalService=C(B),this.dialogService=C(T),this.cdr=C(P),this.appointmentsService=C(U),this.customService=C(pe),this.schedules=[],this.patients=[],this.doctors=[],this.specialties=[],this.appointments=[]}ngOnInit(){this.loadItems(),this.onLoadListViews()}onItemSelected(){let n=this.dcWrapper.viewContainerRef;n.clear();let e=n.createComponent(ye);this.onShowItem=!0}onAddAppointment(){let n={component:O,data:{title:"Cita",description:"Espeficicaciones necesarias de la cita a agregar"},dynamicFields:[{component:R,data:{title:"Cita",items:this.schedules},fieldFormControl:new b("")},{component:R,data:{title:"Paciente",items:this.patients},fieldFormControl:new b("")}]};this.modalService.open(j,{title:"Agregar Cita",size:"sm",forms:[n],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:L.Create,title:"Agregar"}]})}loadItems(){return x(this,null,function*(){let n=new M;this.dialogService.showLoading({description:"Cargando",listener:n});let e=yield this.appointmentsService.getItems();if(n.next(0),!e.isSuccess){this.dialogService.showError({description:e.error});return}this.appointments=e.value,this.cdr.detectChanges()})}onLoadListViews(){return x(this,null,function*(){let n=yield this.customService.loadDoctorsSchedulesPatients();if(!n.isSuccess){this.dialogService.showError({description:n.error});return}let{doctors:e,specialties:i,patients:s}=n.value;this.doctors=e,this.specialties=i,this.patients=s,this.cdr.detectChanges()})}onGenerateReport(){console.log(this.doctors,this.specialties,this.patients);let n={component:O,data:{title:"Parametros de Reporte",description:"Filtros necesarios para generar el reporte"},dynamicFields:[{component:R,data:{title:"Especialidades",items:this.specialties,id:"specialityId"},fieldFormControl:new b},{component:R,data:{title:"Doctores",items:this.doctors.map(e=>({id:e.id,name:e.user.fullName})),id:"doctorId"},fieldFormControl:new b},{component:R,data:{title:"Pacientes",items:this.patients.map(e=>({id:e.id,name:e.user.fullName})),id:"patientId"},fieldFormControl:new b}]};this.modalService.open(j,{title:"Generar Reporte",size:"sm",forms:[n],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:L.Create,title:"Generar"}]}).subscribe({next:e=>{let i=H(e),s={date:i.date,specialityId:i.specialityId,doctorId:i.doctorId,patientId:i.patientId},f=Object.keys(s).reduce((v,E)=>(s[E]!==null&&s[E]!==void 0&&(v[E]=s[E]),v),{});this.createReport(f)},error:e=>{console.log({err:e})},complete:()=>{console.log("Complete")}})}createReport(n){return x(this,null,function*(){let e=new M;this.dialogService.showLoading({description:"Cargando",listener:e});let i=yield this.appointmentsService.getByParams(n);if(e.next(0),i.isSuccess||this.dialogService.showError({description:i.error}),i.value.length===0){this.dialogService.showAlert({description:"No se encontraron registros"});return}let s=i.value.map(v=>({id:v.id,date:v.appointmentDate,status:v.status,patient:v.patient.user.fullName,doctor:v.doctorShedule.doctor.user.fullName,specialty:v.doctorShedule.speciality.name})),f=be(s);we(f,"reporte.csv"),this.dialogService.ShowSuccess({description:"Reporte generado"})})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-appointment"]],viewQuery:function(e,i){if(e&1&&Z($,5),e&2){let s;J(s=ee())&&(i.dcWrapper=s.first)}},standalone:!0,features:[c],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent","generareReport"],[3,"appointments"],["dcWrapper",""]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",0)(2,"app-appointment-hedaer",1),y("onAddEvent",function(){return i.onAddAppointment()})("generareReport",function(){return i.onGenerateReport()}),o(),d(3,"app-appointment-list-items",2),o(),S(4,ze,0,0,"ng-template",3),o()),e&2&&(u("classList",i.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),l(),u("classList",i.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),l(2),u("appointments",i.appointments))},dependencies:[m,ve,Ce,$],encapsulation:2,changeDetection:0})}}return t})();var Se=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-patient"]],standalone:!0,features:[c],decls:1,vars:0,template:function(e,i){e&1&&d(0,"router-outlet")},dependencies:[m,k,oe],encapsulation:2,changeDetection:0})}}return t})();var _e=(()=>{class t{onEditToggle(){}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-detail-patient-header"]],standalone:!0,features:[c],decls:6,vars:0,consts:[[1,"mb-4","flex","justify-between","flex-wrap","gap-3","bg-background","p-2","border","border-muted","rounded-md","shadow-sm"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],[1,"inline-block","space-x-4"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Paciente - Detalles"),o(),d(4,"div",3),o(),d(5,"div",4),o())},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var De=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-detail-patient-profile"]],inputs:{patient:"patient"},standalone:!0,features:[c],decls:34,vars:4,consts:[[1,"mb-4","flex","justify-between","bg-background","p-2","border","border-muted","rounded-md","shadow-sm"],[1,"flex","flex-col","gap-2","w-full"],[1,"font-semibold","text-foreground"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],[1,"text-base","text-foreground"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Perfil"),o(),r(4,"div",1),d(5,"hr",3),r(6,"div",4)(7,"div",5)(8,"span",6),a(9,"Nombre"),o(),r(10,"span",7),a(11),o()()(),d(12,"hr",3),r(13,"div",4)(14,"div",5)(15,"span",6),a(16,"Direccion"),o(),r(17,"span",7),a(18),o()()(),d(19,"hr",3),r(20,"div",4)(21,"div",5)(22,"span",6),a(23,"Telefono"),o(),r(24,"span",7),a(25),o()()(),d(26,"hr",3),r(27,"div",4)(28,"div",5)(29,"span",6),a(30,"Correo"),o(),r(31,"span",7),a(32),o()()(),d(33,"hr",3),o()()()),e&2&&(l(11),h(i.patient.user.fullName),l(7),h(i.patient.address),l(7),h(i.patient.phone),l(7),h(i.patient.user.email))},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var ke=(()=>{class t{constructor(){}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-detail-patient-appointment-item"]],inputs:{appointment:"appointment"},standalone:!0,features:[c],decls:13,vars:3,consts:[[1,"flex","items-start"],[1,"absolute","left-[-10px]","top-0","w-4","h-4","bg-primary","rounded-full"],[1,"ml-4","flex","flex-col","gap-2","w-full","cursor-pointer"],[1,"flex","flex-col","gap-1","relative","p-2"],[1,"flex","flex-row","gap-2"],[1,"font-semibold","text-foreground","cursor-pointer"],[1,"text-foreground"],[1,"font-semibold","text-foreground"],[1,"text-gray-500","text-xs"]],template:function(e,i){e&1&&(r(0,"div",0),d(1,"div",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),a(6),o(),r(7,"span",6),a(8,"-"),o(),r(9,"h4",7),a(10),o()(),r(11,"p",8),a(12),o()()()()),e&2&&(l(6),h(i.appointment.doctorShedule.speciality.name),l(4),h(i.appointment.doctorShedule.doctor.user.fullName),l(2),h(i.appointment.appointmentDate))},dependencies:[m],encapsulation:2,changeDetection:0})}}return t})();var We=["*"];function Ge(t,F){if(t&1&&(r(0,"div",5),d(1,"app-detail-patient-appointment-item",6),o(),d(2,"hr",7)),t&2){let n=D().$implicit;l(),u("appointment",n)}}function He(t,F){t&1&&Y(0,0,["*ngFor","let appointment of appointments"],Ge,3,1)}var Ie=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-detail-patient-appointment"]],inputs:{appointments:"appointments"},standalone:!0,features:[c],ngContentSelectors:We,decls:6,vars:1,consts:[[1,"w-full","overflow-hidden","mb-4","flex","justify-between","bg-background","p-2","border","border-muted","rounded-md","shadow-sm"],[1,"flex","flex-col","gap-2","w-full"],[1,"font-semibold","text-foreground"],[1,"p-2"],[4,"ngFor","ngForOf"],[1,"relative","mb-4","pl-8","border-l-2","border-primary"],[3,"appointment"],[1,"py-2","border-dashed","border-border"]],template:function(e,i){e&1&&(X(),r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Consultas"),o(),r(4,"div",3),S(5,He,2,0,"ng-content",4),o()()()),e&2&&(l(5),u("ngForOf",i.appointments))},dependencies:[m,A,ke],encapsulation:2,changeDetection:0})}}return t})();function Ue(t,F){if(t&1&&d(0,"app-detail-patient-profile",6),t&2){let n=D();u("patient",n.patient)}}var Ee=(()=>{class t{constructor(){this.appointments=[],this.activatedRoute=C(ie),this.modalService=C(B),this.dialogService=C(T),this.cdr=C(P),this.appointmentsService=C(U)}ngOnInit(){this.loadAppointments()}loadAppointments(){return x(this,null,function*(){let n=this.activatedRoute.snapshot.params.id,e=yield this.appointmentsService.getByParams({patientId:parseInt(n)});e.isSuccess||this.dialogService.showError({description:e.error}),this.appointments=e.value,this.patient=this.appointments[0].patient,this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-detail-patient"]],standalone:!0,features:[c],decls:7,vars:2,consts:[[1,"grid-cols-3","py-2"],[1,"flex","flex-col","md:flex-row","px-0","justify-between","md:w-full","overflow-auto","h-full"],[1,"flex","md:w-[25%]","flex-col","px-4","sm:px-8","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","py-0","md:py-4"],[3,"patient",4,"ngIf"],[1,"flex","md:w-[70%]","flex-col","px-4","sm:px-8","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted","py-0","md:py-4"],[1,"flex","w-[%40]","overflow-x-clip",3,"appointments"],[3,"patient"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,"app-detail-patient-header"),S(4,Ue,1,1,"app-detail-patient-profile",3),o(),r(5,"div",4),d(6,"app-detail-patient-appointment",5),o()()()),e&2&&(l(4),u("ngIf",i.patient),l(2),u("appointments",i.appointments))},dependencies:[m,ne,_e,De,Ie],encapsulation:2,changeDetection:0})}}return t})();var $e=[{path:"",component:Se,children:[{path:"list",component:ge},{path:"appointments",component:Fe},{path:"detail/:id",component:Ee},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"error/404"}]}],Me=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=q({type:t})}static{this.\u0275inj=N({imports:[k.forChild($e),k]})}}return t})();var bi=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=q({type:t})}static{this.\u0275inj=N({imports:[Me]})}}return t})();export{bi as PatientModule};
