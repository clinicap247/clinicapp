import{H as p,a as l,b as u,d}from"./chunk-IXRYD2YJ.js";function f(n){let t;return n.form.forEach(r=>{r.dynamicFields.forEach(e=>{t=u(l({},t),{[e.data.id??e.data.title]:e.fieldFormControl.value})})}),t}var h={production:!0,api_url:"https://clinicapp-drbva9enacewftf0.brazilsouth-01.azurewebsites.net/graphql",identity_url:"https://tly1a3n3b7.execute-api.us-east-1.amazonaws.com"};var a=class{constructor(){this.query=""}static fetchQuery(t,s){return d(this,null,function*(){let o=yield(yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})})).json();if(o.errors)throw new Error(`GraphQL Error: ${JSON.stringify(o.errors)}`);return o.data})}setRootType(t){return this.query+=`${t} {
`,this}addFieldWithArgs(t,s){let r=e=>typeof e=="string"?`"${e}"`:typeof e=="object"&&!Array.isArray(e)?`{ ${Object.entries(e).map(([i,c])=>`${i}: ${r(c)}`).join(", ")} }`:`${e}`,o=Object.entries(s).map(([e,i])=>`${e}: ${r(i)}`).join(", ");return this.query+=`  ${t}(${o}) {
`,this}addFunctionWithArgs(t,s){let r=e=>typeof e=="string"?`${e}`:typeof e=="object"&&!Array.isArray(e)?`{ ${Object.entries(e).map(([i,c])=>`${i}: ${r(c)}`).join(", ")} }`:`${e}`,o=Object.entries(s).map(([e,i])=>`${e}: ${r(i)}`).join(", ");return this.query+=`  ${t}(${o}) {
`,this}openBlock(t){return this.query+=`    ${t} {
`,this}addField(t){return this.query+=`      ${t}
`,this}closeBlock(){return this.query+=`    }
`,this}close(){return this.query+=`}
`,this}build(){return this.query}addFieldsFromParams(t){for(let[s,r]of Object.entries(t))r===!0&&this.addField(s);return this}addDeleteMutation(t,s){let r=Object.entries(s).map(([o,e])=>`${o}: "${e}"`).join(", ");return this.query+=`  ${t}(${r})
}
`,this}addMutation(t,s,r){return this.setRootType("mutation").addFieldWithArgs(t,s),r.forEach(o=>this.addField(o)),this.close(),this}};var b=(()=>{class n{constructor(){this.graphqlEndpoint=h.api_url}loadDoctorsSpecialtiesConsultingRooms(){return d(this,null,function*(){try{let r=new a().setRootType("query").openBlock("doctors").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("specialities").addField("id").addField("name").closeBlock().openBlock("consultingRooms").addField("id").addField("roomName").closeBlock().close().build(),{errors:o,doctors:e,specialities:i,consultingRooms:c}=yield a.fetchQuery(r,this.graphqlEndpoint);return o?{isSuccess:!1,error:o[0].message}:{isSuccess:!0,value:{doctors:e,specialties:i,consultingRooms:c}}}catch(s){return{isSuccess:!1,error:s.message}}})}loadDoctorsSchedulesPatients(){return d(this,null,function*(){try{let r=new a().setRootType("query").openBlock("doctors").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("specialities").addField("id").addField("name").closeBlock().openBlock("patients").addField("id").openBlock("user").addField("fullName").closeBlock().closeBlock().close().build(),{errors:o,doctors:e,specialities:i,patients:c}=yield a.fetchQuery(r,this.graphqlEndpoint);return o?{isSuccess:!1,error:o[0].message}:{isSuccess:!0,value:{doctors:e,specialties:i,patients:c}}}catch(s){return{isSuccess:!1,error:s.message}}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=p({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{h as a,a as b,f as c,b as d};
