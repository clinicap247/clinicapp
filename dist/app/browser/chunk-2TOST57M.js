import{a as Z,b,c as ee}from"./chunk-HZNKI2B4.js";import{a as y,b as A,c as T,d as N}from"./chunk-THCKBNDS.js";import{a as M}from"./chunk-LB3JJSQX.js";import{a as j,b as I,c as P}from"./chunk-UWH2UMXI.js";import"./chunk-XAZLOLJU.js";import{b as X,d as J,g as v,i as K,n as Y}from"./chunk-FGCJRMB2.js";import{$ as w,Ca as O,Da as f,Ea as Q,H as q,I as _,Ia as V,Ja as W,Ka as z,L as x,Ma as a,Na as F,O as s,P as k,Qa as l,V as R,W as H,Xa as G,cb as U,d as C,fb as d,ga as c,h as B,nb as $,pa as S,qa as u,rb as E,wa as r,xa as o,ya as p}from"./chunk-7QUWYAMQ.js";var te=(()=>{class t{constructor(){this.onAddEvent=new w}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-patient-list-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[l],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Pacientes - Listado"),o(),r(4,"div",3)(5,"a",4),a(6,"Lista"),o(),r(7,"span"),a(8," - Pacientes"),o()()(),r(9,"div",5)(10,"button",6),f("click",function(){return i.onAddToggle()}),a(11," Agregar Paciente "),o()()())},dependencies:[d],encapsulation:2,changeDetection:0})}}return t})();var Ce=["patient-item",""],ne=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["","patient-item",""]],inputs:{patient:"patient"},standalone:!0,features:[l],attrs:Ce,decls:12,vars:3,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,i){e&1&&(r(0,"td",0)(1,"div",1)(2,"span",2),a(3),o()()(),r(4,"td",0)(5,"div",1)(6,"span",2),a(7),o()()(),r(8,"td",3)(9,"div",1)(10,"span",2),a(11),o()()()),e&2&&(c(3),F(i.patient.user.fullName),c(4),F(i.patient.phone),c(4),F(i.patient.address))},dependencies:[d],encapsulation:2,changeDetection:0})}}return t})();function ye(t,L){if(t&1){let n=O();r(0,"tr",10),f("click",function(){let i=R(n).$implicit,m=Q();return H(m.onSelectTable(i))}),o()}if(t&2){let n=L.$implicit;u("patient",n)}}var oe=(()=>{class t{constructor(){this.onSelectItem=new w}onSelectTable(n){this.onSelectItem.emit(n)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-patient-list-items"]],inputs:{patients:"patients"},outputs:{onSelectItem:"onSelectItem"},standalone:!0,features:[l],decls:17,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["patient-item","","class","border-b border-dashed border-border hover:bg-card",3,"patient","click",4,"ngFor","ngForOf"],["patient-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","patient"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Almacenes"),o()()(),r(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Pacientes"),o(),r(11,"th",7),a(12,"Telefono"),o(),r(13,"th",8),a(14,"Direccion"),o()()(),r(15,"tbody"),S(16,ye,1,1,"tr",9),o()()()()),e&2&&(c(16),u("ngForOf",i.patients))},dependencies:[d,U,ne],encapsulation:2,changeDetection:0})}}return t})();var ie=(()=>{class t{constructor(){this.validators=[]}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-input-date"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[l],decls:1,vars:1,consts:[["type","date",3,"formControl"]],template:function(e,i){e&1&&p(0,"input",0),e&2&&u("formControl",i.formControl)},dependencies:[d,Y,X,J,K],encapsulation:2})}}return t})();var re=(()=>{class t{constructor(){this.graphqlEndpoint=Z.api_url}getAll(){return C(this,arguments,function*(n={}){try{let i=new b().setRootType("query").openBlock("patients").addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().close().build(),{patients:m,errors:g}=yield b.fetchQuery(i,this.graphqlEndpoint);return g?{isSuccess:!1,error:g[0].message}:{isSuccess:!0,value:m}}catch(e){return{isSuccess:!1,error:e.message}}})}getById(n){return C(this,null,function*(){try{let i=new b().setRootType("query").addFieldWithArgs("patient",{id:n}).addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().close().build(),{patients:m,errors:g}=yield b.fetchQuery(i,this.graphqlEndpoint);return g?{isSuccess:!1,error:g[0].message}:{isSuccess:!0,value:m}}catch(e){return{isSuccess:!1,error:e.message}}})}create(n,e){return C(this,null,function*(){let i=new b;i.setRootType("mutation").addFieldWithArgs("createPatient",{input:n}).addField("id").addField("address").addField("phone").addField("birthdate").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().closeBlock();let m=i.build();console.log("Generated Mutation:",m);try{let{createPatient:g,errors:D}=yield b.fetchQuery(m,this.graphqlEndpoint);return D?{isSuccess:!1,error:D[0].message}:{isSuccess:!0,value:g}}catch(g){return{isSuccess:!1,error:g.message}}})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function be(t,L){}var ae=(()=>{class t{constructor(){this.onShowItem=!1,this.modalService=x(P),this.dialogService=x(M),this.cdr=x(G),this.patientService=x(re),this.patients=[]}ngOnInit(){this.loadPatients()}onAddPatient(){let n={component:A,data:{title:"Usuario",description:"Especificaciones necesarias del usuario a agregar"},dynamicFields:[{component:y,data:{placeholder:"usuario@sistema.com",title:"email"},fieldFormControl:new v("")},{component:y,data:{placeholder:"password",title:"Password",id:"password"},fieldFormControl:new v("")},{component:y,data:{title:"Nombres",placeholder:"Agregar nombre",id:"fullName"},fieldFormControl:new v("")}]},e={component:A,data:{title:"Paciente",description:"Es necesario ingresar el nombre del paciente"},dynamicFields:[{component:y,data:{placeholder:"1234567",title:"Carnet de identidad",id:"ic"},fieldFormControl:new v("")},{component:y,data:{placeholder:"Av. 24 de septiembre",title:"Domicilio",id:"address"},fieldFormControl:new v("")},{component:y,data:{placeholder:"telefono del paciente",title:"Telefono",id:"phone"},fieldFormControl:new v("")},{component:ie,data:{placeholder:"Fecha de nacimiento",title:"Nacimiento",id:"birthdate"},fieldFormControl:new v("")}]};this.modalService.open(T,{title:"Agregar Paciente",size:"sm",forms:[n,e],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:I.Create,title:"Agregar"}]}).subscribe(i=>{let{ic:m,address:g,phone:D,birthdate:ue,email:fe,password:he,fullName:ge}=ee(i),ve=new Date(ue).toISOString().split("T")[0].split("-").reverse().join("-"),xe={ic:m,address:g,phone:D,birthdate:ve,user:{email:fe,password:he,fullName:ge}};this.createPatient(xe)})}loadPatients(){return C(this,null,function*(){let n=new B;this.dialogService.showLoading({description:"Cargando",listener:n});let e=yield this.patientService.getAll();if(n.next(0),!e.isSuccess){this.dialogService.showError({description:"No se ha podido cargar los pacientes"});return}this.patients=e.value,this.cdr.detectChanges()})}createPatient(n){return C(this,null,function*(){let e=new B;this.dialogService.showLoading({description:"Cargando",listener:e});let i=yield this.patientService.create(n);if(e.next(0),!i.isSuccess){this.dialogService.showError({description:"No se ha podido crear el paciente"});return}this.patients=[...this.patients,i.value],this.dialogService.ShowSuccess({description:"Paciente creado con \xE9xito"}),this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-list"]],standalone:!0,features:[l],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"patients"],["dcWrapper",""]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",0)(2,"app-patient-list-header",1),f("onAddEvent",function(){return i.onAddPatient()}),o(),p(3,"app-patient-list-items",2),o(),S(4,be,0,0,"ng-template",3),o()),e&2&&(u("classList",i.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),u("classList",i.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),c(2),u("patients",i.patients))},dependencies:[d,te,oe],encapsulation:2,changeDetection:0})}}return t})();var se=(()=>{class t{constructor(){this.onAddEvent=new w}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-appointment-hedaer"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[l],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Citas - Listado"),o(),r(4,"div",3)(5,"a",4),a(6,"Lista"),o(),r(7,"span"),a(8," - Citas"),o()()(),r(9,"div",5)(10,"button",6),f("click",function(){return i.onAddToggle()}),a(11," Agregar Cita "),o()()())},dependencies:[d],encapsulation:2,changeDetection:0})}}return t})();var le=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-appointment-list-items"]],standalone:!0,features:[l],decls:14,vars:0,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Citas"),o()()(),r(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Citas"),o(),r(11,"th",8),a(12,"Status"),o()()(),p(13,"tbody"),o()()())},dependencies:[d],encapsulation:2,changeDetection:0})}}return t})();var de=(()=>{class t{close(){}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-appointment-detail"]],standalone:!0,features:[l],decls:34,vars:1,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],[1,"flex","py-2","flex-col","gap-2"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4),o(),r(5,"button",4),f("click",function(){return i.close()}),a(6," X "),o()(),p(7,"hr",5),o(),r(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Detalles"),o()()(),p(12,"hr",5),r(13,"div",6)(14,"div",7)(15,"span",8),a(16,"Fecha"),o()()(),p(17,"hr",5),r(18,"div",6)(19,"div",7)(20,"span",8),a(21,"Producto"),o()()(),p(22,"hr",5),r(23,"div",6)(24,"div",7)(25,"span",8),a(26,"Cantidad"),o()()(),p(27,"hr",5),r(28,"div",6)(29,"div",7)(30,"span",8),a(31,"Almacen"),o()()(),p(32,"hr",5)(33,"div",9),o()),e&2&&(c(4),F("Cita Medica : "))},dependencies:[d],encapsulation:2,changeDetection:0})}}return t})();function we(t,L){}var me=(()=>{class t{constructor(){this.onShowItem=!1,this.modalService=x(P),this.dialogService=x(M),this.schedules=[{id:1,name:"Horario-1"},{id:2,name:"Horario-2"}],this.patients=[{id:1,name:"Paciente-1"},{id:2,name:"Paciente-2"},{id:3,name:"Paciente-2"},{id:4,name:"Paciente-2"}]}ngAfterViewInit(){this.onItemSelected()}onItemSelected(){let n=this.dcWrapper.viewContainerRef;n.clear();let e=n.createComponent(de);this.onShowItem=!0}onAddAppointment(){let n={component:A,data:{title:"Cita",description:"Espeficicaciones necesarias de la cita a agregar"},dynamicFields:[{component:N,data:{title:"Cita",items:this.schedules},fieldFormControl:new v("")},{component:N,data:{title:"Paciente",items:this.patients},fieldFormControl:new v("")}]};this.modalService.open(T,{title:"Agregar Cita",size:"sm",forms:[n],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:I.Create,title:"Agregar"}]})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-appointment"]],viewQuery:function(e,i){if(e&1&&V(j,5),e&2){let m;W(m=z())&&(i.dcWrapper=m.first)}},standalone:!0,features:[l],decls:5,vars:2,consts:[[3,"classList"],[3,"onAddEvent"],["dcWrapper",""]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",0)(2,"app-appointment-hedaer",1),f("onAddEvent",function(){return i.onAddAppointment()}),o(),p(3,"app-appointment-list-items"),o(),S(4,we,0,0,"ng-template",2),o()),e&2&&(u("classList",i.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),u("classList",i.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"))},dependencies:[d,se,le,j],encapsulation:2,changeDetection:0})}}return t})();var pe=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=s({type:t,selectors:[["app-patient"]],standalone:!0,features:[l],decls:1,vars:0,template:function(e,i){e&1&&p(0,"router-outlet")},dependencies:[d,E,$],encapsulation:2,changeDetection:0})}}return t})();var Se=[{path:"",component:pe,children:[{path:"list",component:ae},{path:"appointments",component:me},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"error/404"}]}],ce=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=k({type:t})}static{this.\u0275inj=_({imports:[E.forChild(Se),E]})}}return t})();var Yt=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=k({type:t})}static{this.\u0275inj=_({imports:[ce]})}}return t})();export{Yt as PatientModule};
